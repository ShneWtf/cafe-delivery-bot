# üçΩ Telegram Cafe Delivery Bot

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è –∫–∞—Ñ–µ-–¥–æ—Å—Ç–∞–≤–∫–∏ —Å Web App (Mini App) –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- üõí –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é —á–µ—Ä–µ–∑ Web App
- üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- üéÅ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã (500‚ÇΩ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
- üí∞ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ (–¥–æ 50% –∑–∞–∫–∞–∑–∞, –º–∏–Ω. 500‚ÇΩ)
- üíµ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫–µ—à–±—ç–∫–∞ (5% —Å –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞)
- üìç –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- üì± –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤

### –î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞:

#### üëë –î–∏—Ä–µ–∫—Ç–æ—Ä (ID: 7592151419)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–æ–ª–µ–π
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### üõ† –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–æ–≤
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–æ–≤
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é (—ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç JSON)
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

#### üöö –ö—É—Ä—å–µ—Ä
- –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞–≤–æ–∫
- –û—Ç–º–µ—Ç–∫–∞ "–ó–∞–±—Ä–∞–ª –∑–∞–∫–∞–∑"
- –û—Ç–º–µ—Ç–∫–∞ "–î–æ—Å—Ç–∞–≤–∏–ª"
- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ:
# - BOT_TOKEN (–ø–æ–ª—É—á–∏—Ç–µ —É @BotFather)
# - TELEGRAM_API_TOKEN (—Ç–æ—Ç –∂–µ —Ç–æ–∫–µ–Ω)
# - WEBAPP_URL (URL –≤–∞—à–µ–≥–æ Web App)
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞
python bot/main.py
```

### 4. –ó–∞–ø—É—Å–∫ Web App —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
python webapp/api.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ database.py          # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–¥–º–∏–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ director.py      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ courier.py       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫—É—Ä—å–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ keyboards/
‚îÇ       ‚îî‚îÄ‚îÄ __init__.py      # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ webapp/
‚îÇ   ‚îú‚îÄ‚îÄ api.py               # FastAPI backend
‚îÇ   ‚îî‚îÄ‚îÄ static/
‚îÇ       ‚îî‚îÄ‚îÄ index.html       # Web App –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ
‚îú‚îÄ‚îÄ .env.example             # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üéÆ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|------|----------|
| `/start` | –í—Å–µ | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/director` | –î–∏—Ä–µ–∫—Ç–æ—Ä | –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ |
| `/admin` | –ê–¥–º–∏–Ω/–î–∏—Ä–µ–∫—Ç–æ—Ä | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |
| `/courier` | –ö—É—Ä—å–µ—Ä/–ê–¥–º–∏–Ω/–î–∏—Ä–µ–∫—Ç–æ—Ä | –ü–∞–Ω–µ–ª—å –∫—É—Ä—å–µ—Ä–∞ |

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:

### –¢–∞–±–ª–∏—Ü—ã:
- **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—è–º–∏ –∏ –±–∞–ª–∞–Ω—Å–∞–º–∏
- **orders** - –∑–∞–∫–∞–∑—ã
- **categories** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ–Ω—é
- **menu_items** - –ø–æ–∑–∏—Ü–∏–∏ –º–µ–Ω—é
- **stories** - –ø—Ä–æ–º–æ-–∏—Å—Ç–æ—Ä–∏–∏

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- `director` - –¥–∏—Ä–µ–∫—Ç–æ—Ä (ID: 7592151419)
- `admin` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- `courier` - –∫—É—Ä—å–µ—Ä
- `user` - –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

## üåê –î–µ–ø–ª–æ–π Web App

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è Telegram Web App
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: nginx + Gunicorn/Uvicorn

### –ü—Ä–∏–º–µ—Ä nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```nginx
server {
    listen 443 ssl;
    server_name your-domain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /static/ {
        alias /path/to/webapp/static/;
    }
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Web App –≤ BotFather:

1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. Bot Settings ‚Üí Menu Button ‚Üí Configure menu button
4. –£–∫–∞–∂–∏—Ç–µ URL: `https://your-domain.com/app/`

## üí≥ –û–ø–ª–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ YooKassa:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ yookassa.ru
2. –ü–æ–ª—É—á–∏—Ç–µ `shop_id` –∏ `secret_key`
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```
   YOOKASSA_SHOP_ID=your_shop_id
   YOOKASSA_SECRET_KEY=your_secret_key
   ```
4. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ `yookassa` –≤ requirements.txt
5. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ª–æ–≥–∏–∫—É –æ–ø–ª–∞—Ç—ã –≤ `webapp/api.py`

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Web App:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è HTTPS —Ç—É–Ω–Ω–µ–ª—è:
   ```bash
   ngrok http 8000
   ```

2. –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL –≤ `.env`:
   ```
   WEBAPP_URL=https://xxxx.ngrok.io/app/
   ```

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/api/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| GET | `/api/user/{id}` | –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | `/api/menu` | –ü–æ–ª–Ω–æ–µ –º–µ–Ω—é |
| GET | `/api/categories` | –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| GET | `/api/stories` | –ü—Ä–æ–º–æ-–∏—Å—Ç–æ—Ä–∏–∏ |
| POST | `/api/order` | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ |
| GET | `/api/orders/{user_id}` | –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ |

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

**–î–∏—Ä–µ–∫—Ç–æ—Ä –±–æ—Ç–∞:** ID `7592151419` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
